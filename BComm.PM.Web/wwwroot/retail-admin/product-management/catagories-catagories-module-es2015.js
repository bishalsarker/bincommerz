(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"1Odh":function(t,e,a){"use strict";a.r(e),e.default='<div style="padding-left: 12px;">\n    <app-data-table\n        [columnConfig]="catagoriesListService.columnConfig | async" \n        [tableData]="catagoriesDataService.catagories | async"\n        [actions]="catagoriesListService.tableActions | async">\n        <a class="btn btn-link" routerLink="/categories/add"  style="padding-left: 0px;">\n            <i class="fas fa-plus"></i>&nbsp;\n            <span style="font-weight: 600; margin-left: 5px;">Add New</span>\n        </a>\n    </app-data-table>\n</div>'},CC4O:function(t,e,a){"use strict";a.r(e),e.default=""},K2zU:function(t,e,a){"use strict";a.r(e),e.default=""},NzEe:function(t,e,a){"use strict";a.r(e);var r=a("mrSG"),s=a("8Y7J"),i=a("SVse"),o=a("iInd"),n=a("k8Mo");let l=class{constructor(t){this.breadCrumbService=t}ngOnInit(){this.breadCrumbService.addBreadcrumb({title:"Categories",route:"/categories"})}ngOnDestroy(){this.breadCrumbService.removeLast()}};l.ctorParameters=()=>[{type:n.a}],l=r.a([Object(s.n)({selector:"app-catagories",template:r.b(a("jdgN")).default,styles:[r.b(a("gTk1")).default]})],l);var c=a("s7LF"),d=a("2Vo4"),g=a("lJxs"),u=a("fIz6"),p=a("Gfgi"),h=a("IheW"),m=a("EApP");let b=class{constructor(t,e,a){this.httpClient=t,this.toastr=e,this.router=a,this.catagories=new d.a([]),this.getAllCatagories().subscribe()}getAllCatagories(){return this.httpClient.get(u.a+"categories/get/all",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(g.a)(t=>{t.isSuccess?this.catagories.next(t.data):this.showError(t.message)}))}getCategoryById(t){return this.httpClient.get(u.a+"categories/get/"+t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(g.a)(t=>t.isSuccess?t.data:(this.showError(t.message),null)))}addCategory(t){return this.httpClient.post(u.a+"categories/addnew",t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(g.a)(e=>e.isSuccess?(this.getAllCatagories().subscribe(),this.router.navigate(["categories"]),this.toastr.success("New category added: "+t.name),!0):(this.showError(e.message),!1)))}updateCategory(t){return this.httpClient.put(u.a+"categories/update",t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(g.a)(e=>e.isSuccess?(this.getAllCatagories().subscribe(),this.router.navigate(["categories"]),this.toastr.success("Category Updated: "+t.name),!0):(this.showError(e.message),!1)))}deleteCategory(t){return this.httpClient.delete(u.a+"categories/delete/"+t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(g.a)(t=>{t.isSuccess?(this.getAllCatagories().subscribe(),this.router.navigate(["categories"]),this.toastr.success("Category deleted")):this.showError(t.message)}))}showError(t){this.toastr.error("","Error occured: "+t)}};b.ctorParameters=()=>[{type:h.a},{type:m.b},{type:o.b}],b=r.a([Object(s.C)({providedIn:"root"})],b);let y=class{constructor(t,e,a,r){this.breadCrumbService=t,this.tagsDataService=e,this.catagoryDataService=a,this.route=r,this.tags$=new d.a([]),this.categoryId=new d.a(null),this.imageUrl="./assets/images/product-placeholder.png",this.categoryForm=new c.b({name:new c.a("",c.f.required),slug:new c.a("",c.f.required),description:new c.a(""),tag:new c.a("",c.f.required),image:new c.a("",c.f.required)}),this.disableAddBtn=!1,this.buttonText="Save"}ngOnInit(){this.breadCrumbService.addBreadcrumb({title:this.isEditMode?"Edit":"Add",route:""}),this.setTags(),this.isEditMode&&(this.slugControl.disable(),this.route.params.subscribe(t=>{const e=t.id;this.categoryId.next(e),this.getCategoryById()})),this.buttonText=this.isEditMode?"Update":"Save"}ngOnDestroy(){this.breadCrumbService.removeLast()}setTags(){this.tagsDataService.tags.pipe(Object(g.a)(t=>t.map(t=>({name:t.name,value:t.id})))).subscribe(t=>this.tags$.next(t))}get nameControl(){return this.categoryForm.get("name")}get descriptionControl(){return this.categoryForm.get("description")}get tagsControl(){return this.categoryForm.get("tag")}get imageControl(){return this.categoryForm.get("image")}get slugControl(){return this.categoryForm.get("slug")}addOrUpdateCatagory(){let t=!0;if(this.slugControl.value.match(/^[a-zA-Z0-9-_]+$/)||(t=!1,alert("Slug is not valid. Please use only allowed characters.")),t){this.disableAddBtn=!0,this.buttonText="Saving...";(this.isEditMode?this.updateCategory():this.addCatagory()).subscribe(t=>{t||(this.disableAddBtn=!1,this.buttonText="Save")},()=>{this.disableAddBtn=!1,this.buttonText="Save"})}}getCategoryById(){this.catagoryDataService.getCategoryById(this.categoryId.value).subscribe(t=>{t&&(this.nameControl.setValue(t.name),this.tagsControl.setValue(t.tagHashId),this.descriptionControl.setValue(t.description),this.slugControl.setValue(t.slug),this.imageControl.setValue(u.a+t.imageUrl),this.imageUrl=u.a+t.imageUrl,console.log(this.categoryForm))})}get isEditMode(){return this.route.snapshot.data.editMode}addCatagory(){return this.catagoryDataService.addCategory({name:this.nameControl.value,slug:this.slugControl.value,tagHashId:this.tagsControl.value,image:this.imageControl.value,description:this.descriptionControl.value})}updateCategory(){return this.catagoryDataService.updateCategory({id:this.categoryId.value,name:this.nameControl.value,tagHashId:this.tagsControl.value,slug:this.slugControl.value,image:this.imageControl.value,description:this.descriptionControl.value})}handleFileInput(t){if(t){var e=new FileReader;e.readAsDataURL(t),e.onload=t=>{const a=e.result;this.imageUrl=a,this.imageControl.setValue(a.split(",")[1])}}}};y.ctorParameters=()=>[{type:n.a},{type:p.a},{type:b},{type:o.a}],y=r.a([Object(s.n)({selector:"app-category-form",template:r.b(a("jH7k")).default,styles:[r.b(a("CC4O")).default]})],y);let C=class{constructor(t,e){this.router=t,this.categoryDataService=e,this.columnConfig=new d.a([{columnName:"Name",propertyName:"name"},{columnName:"Assiciated Tag",propertyName:"tagName"},{columnName:"Description",propertyName:"description",filter:t=>t.description&&""!==t.description.trim()?t.description:"n/a"}]),this.tableActions=new d.a([{icon:"",title:"Edit",showActions:()=>!0,predicate:t=>!0,do:t=>{this.router.navigate(["/categories/edit/"+t.id])}},{icon:"",title:"Delete",showActions:()=>!0,predicate:t=>!0,do:t=>{confirm("Are you sure?")&&this.categoryDataService.deleteCategory(t.id).subscribe()}}])}};C.ctorParameters=()=>[{type:o.b},{type:b}],C=r.a([Object(s.C)({providedIn:"root"})],C);let v=class{constructor(t,e){this.catagoriesListService=t,this.catagoriesDataService=e,this.tableData=new d.a([])}ngOnInit(){}};v.ctorParameters=()=>[{type:C},{type:b}],v=r.a([Object(s.n)({selector:"app-category-list",template:r.b(a("1Odh")).default,styles:[r.b(a("K2zU")).default]})],v);const f=[{path:"",component:l,children:[{path:"",component:v},{path:"add",component:y,data:{editMode:!1}},{path:"edit/:id",component:y,data:{editMode:!0}}]}];let S=class{};S=r.a([Object(s.K)({imports:[o.c.forChild(f)],exports:[o.c]})],S);var w=a("PCNd"),x=a("wTG2");a.d(e,"CatagoriesModule",(function(){return I}));let I=class{};I=r.a([Object(s.K)({declarations:[l,v,y],imports:[i.b,S,x.a,c.e,w.a]})],I)},gTk1:function(t,e,a){"use strict";a.r(e),e.default=""},jH7k:function(t,e,a){"use strict";a.r(e),e.default='<div style="padding-left: 12px;">\n    <div class="row">\n        <div class="col-md-5 col-sm-12">\n            <div class="form-group required">\n                <label for="exampleInputEmail1">Name</label>\n                <input type="text" class="form-control" [formControl]="nameControl" />\n            </div>\n            <div class="form-group required" style="margin-bottom: 15px;">\n                <label for="exampleInputEmail1">Slug</label>\n                <input type="text" class="form-control" [formControl]="slugControl" />\n                <small>Slug should be unique. Only english characters are allowed. No spaces and special characters are allowed accept hypen (-) and underscore (_)</small>\n            </div>\n            <div class="form-group required">\n                <label for="exampleFormControlSelect2">Associated Tag</label>\n                <ng-select\n                    [items]="tags$ | async"\n                    [multiple]="false"\n                    [closeOnSelect]="true"\n                    [searchable]="false"\n                    [loading]="loading$ | async"\n                    bindLabel="name"\n                    bindValue="value"\n                    placeholder="Select Tag"\n                    [formControl]="tagsControl">\n                </ng-select>\n            </div> \n            <div class="form-group">\n                <label for="exampleFormControlTextarea1">Description</label>\n                <textarea \n                    class="form-control" \n                    id="exampleFormControlTextarea1" \n                    rows="5"\n                    [formControl]="descriptionControl">\n                </textarea>\n            </div>\n        </div>\n        <div class="col-lg-7 col-sm-12 d-flex justify-content-center">\n            <div style="padding-right: 20px;">\n                <div class="form-group required" style="margin-bottom:20px">\n                    <label for="file">Category Image</label>\n                    <div class="border" style="padding: 15px; margin-bottom: 15px; width: 420px;">\n                        <img [src]="imageUrl" class="w-100"  style="height: 375px; object-fit: contain" />\n                    </div>\n                    <input \n                        id="file" \n                        type="file" \n                        accept=".jpg, .jpeg, .png" \n                        (change)="handleFileInput($event.target.files[0])" \n                    />\n                </div>\n            </div>\n         </div>\n    </div>\n    \n    <div class="button-row">\n        <button class="btn btn-danger" routerLink="/categories" [disabled]="disableAddBtn">Cancel</button>\n        <button \n            class="btn btn-primary" \n            [disabled]="!categoryForm.valid || disableAddBtn" \n            (click)="addOrUpdateCatagory()">\n            {{ buttonText }}\n        </button>\n    </div>\n</div>\n'},jdgN:function(t,e,a){"use strict";a.r(e),e.default='<div style="margin: 15px 15px">\n    <app-breadcrumb [breadcrumbs]="breadCrumbService.breadcrumbs | async"></app-breadcrumb>\n    <router-outlet></router-outlet>\n</div>'}}]);