function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"1Odh":function(e,t,a){"use strict";a.r(t),t.default='<div style="padding-left: 12px;">\n    <app-data-table\n        [columnConfig]="catagoriesListService.columnConfig | async" \n        [tableData]="catagoriesDataService.catagories | async"\n        [actions]="catagoriesListService.tableActions | async">\n        <a class="btn btn-link" routerLink="/categories/add"  style="padding-left: 0px;">\n            <i class="fas fa-plus"></i>&nbsp;\n            <span style="font-weight: 600; margin-left: 5px;">Add New</span>\n        </a>\n    </app-data-table>\n</div>'},CC4O:function(e,t,a){"use strict";a.r(t),t.default=""},K2zU:function(e,t,a){"use strict";a.r(t),t.default=""},NzEe:function(e,t,a){"use strict";a.r(t);var n=a("mrSG"),r=a("8Y7J"),i=a("SVse"),o=a("iInd"),s=a("k8Mo"),c=function(){function e(t){_classCallCheck(this,e),this.breadCrumbService=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.breadCrumbService.addBreadcrumb({title:"Categories",route:"/categories"})}},{key:"ngOnDestroy",value:function(){this.breadCrumbService.removeLast()}}]),e}();c.ctorParameters=function(){return[{type:s.a}]},c=n.a([Object(r.n)({selector:"app-catagories",template:n.b(a("jdgN")).default,styles:[n.b(a("gTk1")).default]})],c);var l=a("s7LF"),u=a("2Vo4"),d=a("lJxs"),g=a("fIz6"),p=a("Gfgi"),h=a("IheW"),f=a("EApP"),m=function(){function e(t,a,n){_classCallCheck(this,e),this.httpClient=t,this.toastr=a,this.router=n,this.catagories=new u.a([]),this.getAllCatagories().subscribe()}return _createClass(e,[{key:"getAllCatagories",value:function(){var e=this;return this.httpClient.get(g.a+"categories/get/all",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(d.a)((function(t){t.isSuccess?e.catagories.next(t.data):e.showError()})))}},{key:"getCategoryById",value:function(e){var t=this;return this.httpClient.get(g.a+"categories/get/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(d.a)((function(e){return e.isSuccess?e.data:(t.showError(),null)})))}},{key:"addCategory",value:function(e){var t=this;return this.httpClient.post(g.a+"categories/addnew",e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(d.a)((function(a){a.isSuccess?(t.getAllCatagories().subscribe(),t.router.navigate(["categories"]),t.toastr.success("New category added: "+e.name)):t.showError()})))}},{key:"updateCategory",value:function(e){var t=this;return this.httpClient.put(g.a+"categories/update",e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(d.a)((function(a){a.isSuccess?(t.getAllCatagories().subscribe(),t.router.navigate(["categories"]),t.toastr.success("Category Updated: "+e.name)):t.showError()})))}},{key:"deleteCategory",value:function(e){var t=this;return this.httpClient.delete(g.a+"categories/delete/"+e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(d.a)((function(e){e.isSuccess?(t.getAllCatagories().subscribe(),t.router.navigate(["categories"]),t.toastr.success("Category deleted")):t.showError()})))}},{key:"showError",value:function(){this.toastr.error("","Error occured")}}]),e}();m.ctorParameters=function(){return[{type:h.a},{type:f.b},{type:o.b}]},m=n.a([Object(r.C)({providedIn:"root"})],m);var b=function(){function e(t,a,n,r){_classCallCheck(this,e),this.breadCrumbService=t,this.tagsDataService=a,this.catagoryDataService=n,this.route=r,this.tags$=new u.a([]),this.categoryId=new u.a(null),this.imageUrl="./assets/images/product-placeholder.png",this.categoryForm=new l.b({name:new l.a("",l.f.required),description:new l.a(""),tag:new l.a("",l.f.required),image:new l.a("",l.f.required)}),this.disableAddBtn=!1,this.buttonText="Save"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.breadCrumbService.addBreadcrumb({title:this.isEditMode?"Edit":"Add",route:""}),this.setTags(),this.isEditMode&&this.route.params.subscribe((function(t){var a=t.id;e.categoryId.next(a),e.getCategoryById()})),this.buttonText=this.isEditMode?"Update":"Save"}},{key:"ngOnDestroy",value:function(){this.breadCrumbService.removeLast()}},{key:"setTags",value:function(){var e=this;this.tagsDataService.tags.pipe(Object(d.a)((function(e){return e.map((function(e){return{name:e.name,value:e.id}}))}))).subscribe((function(t){return e.tags$.next(t)}))}},{key:"nameControl",get:function(){return this.categoryForm.get("name")}},{key:"descriptionControl",get:function(){return this.categoryForm.get("description")}},{key:"tagsControl",get:function(){return this.categoryForm.get("tag")}},{key:"imageControl",get:function(){return this.categoryForm.get("image")}},{key:"addOrUpdateCatagory",value:function(){var e=this;this.disableAddBtn=!0,this.buttonText="Saving...",(this.isEditMode?this.updateCategory():this.addCatagory()).subscribe((function(){}),(function(){e.disableAddBtn=!1,e.buttonText="Save"}))}},{key:"getCategoryById",value:function(){var e=this;this.catagoryDataService.getCategoryById(this.categoryId.value).subscribe((function(t){t&&(e.nameControl.setValue(t.name),e.tagsControl.setValue(t.tagHashId),e.descriptionControl.setValue(t.description),e.imageUrl=g.a+t.imageUrl)}))}},{key:"isEditMode",get:function(){return this.route.snapshot.data.editMode}},{key:"addCatagory",value:function(){return this.catagoryDataService.addCategory({name:this.nameControl.value,tagHashId:this.tagsControl.value,image:this.imageControl.value,description:this.descriptionControl.value})}},{key:"updateCategory",value:function(){return this.catagoryDataService.updateCategory({id:this.categoryId.value,name:this.nameControl.value,tagHashId:this.tagsControl.value,image:this.imageControl.value,description:this.descriptionControl.value})}},{key:"handleFileInput",value:function(e){var t=this;if(e){var a=new FileReader;a.readAsDataURL(e),a.onload=function(e){var n=a.result;t.imageUrl=n,t.imageControl.setValue(n.split(",")[1])}}}}]),e}();b.ctorParameters=function(){return[{type:s.a},{type:p.a},{type:m},{type:o.a}]},b=n.a([Object(r.n)({selector:"app-category-form",template:n.b(a("jH7k")).default,styles:[n.b(a("CC4O")).default]})],b);var v=function e(t,a){var n=this;_classCallCheck(this,e),this.router=t,this.categoryDataService=a,this.columnConfig=new u.a([{columnName:"Name",propertyName:"name"},{columnName:"Assiciated Tag",propertyName:"tagName"},{columnName:"Description",propertyName:"description",filter:function(e){return e.description&&""!==e.description.trim()?e.description:"n/a"}}]),this.tableActions=new u.a([{icon:"",title:"Edit",showActions:function(){return!0},predicate:function(e){return!0},do:function(e){n.router.navigate(["/categories/edit/"+e.id])}},{icon:"",title:"Delete",showActions:function(){return!0},predicate:function(e){return!0},do:function(e){confirm("Are you sure?")&&n.categoryDataService.deleteCategory(e.id).subscribe()}}])};v.ctorParameters=function(){return[{type:o.b},{type:m}]},v=n.a([Object(r.C)({providedIn:"root"})],v);var y=function(){function e(t,a){_classCallCheck(this,e),this.catagoriesListService=t,this.catagoriesDataService=a,this.tableData=new u.a([])}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();y.ctorParameters=function(){return[{type:v},{type:m}]};var C=[{path:"",component:c,children:[{path:"",component:y=n.a([Object(r.n)({selector:"app-category-list",template:n.b(a("1Odh")).default,styles:[n.b(a("K2zU")).default]})],y)},{path:"add",component:b,data:{editMode:!1}},{path:"edit/:id",component:b,data:{editMode:!0}}]}],k=function e(){_classCallCheck(this,e)};k=n.a([Object(r.K)({imports:[o.c.forChild(C)],exports:[o.c]})],k);var w=a("PCNd"),S=a("wTG2");a.d(t,"CatagoriesModule",(function(){return x}));var x=function e(){_classCallCheck(this,e)};x=n.a([Object(r.K)({declarations:[c,y,b],imports:[i.b,k,S.a,l.e,w.a]})],x)},gTk1:function(e,t,a){"use strict";a.r(t),t.default=""},jH7k:function(e,t,a){"use strict";a.r(t),t.default='<div style="padding-left: 12px;">\n    <div class="row">\n        <div class="col-md-5 col-sm-12">\n            <div class="form-group required">\n                <label for="exampleInputEmail1">Name</label>\n                <input type="text" class="form-control" [formControl]="nameControl" />\n            </div>\n            <div class="form-group required">\n                <label for="exampleFormControlSelect2">Associated Tag</label>\n                <ng-select\n                    [items]="tags$ | async"\n                    [multiple]="false"\n                    [closeOnSelect]="true"\n                    [searchable]="false"\n                    [loading]="loading$ | async"\n                    bindLabel="name"\n                    bindValue="value"\n                    placeholder="Select Tag"\n                    [formControl]="tagsControl">\n                </ng-select>\n            </div> \n            <div class="form-group">\n                <label for="exampleFormControlTextarea1">Description</label>\n                <textarea \n                    class="form-control" \n                    id="exampleFormControlTextarea1" \n                    rows="3"\n                    [formControl]="descriptionControl">\n                </textarea>\n            </div>\n        </div>\n        <div class="col-lg-7 col-sm-12 d-flex justify-content-center">\n            <div style="padding-right: 20px;">\n                <div class="form-group required" style="margin-bottom:20px">\n                    <label for="file">Category Image</label>\n                    <div class="border" style="padding: 15px; margin-bottom: 15px; width: 420px;">\n                        <img [src]="imageUrl" class="w-100"  style="height: 375px; object-fit: contain" />\n                    </div>\n                    <input \n                        id="file" \n                        type="file" \n                        accept=".jpg, .jpeg, .png" \n                        (change)="handleFileInput($event.target.files[0])" \n                    />\n                </div>\n            </div>\n         </div>\n    </div>\n    \n    <div class="button-row">\n        <button class="btn btn-danger" routerLink="/categories" [disabled]="disableAddBtn">Cancel</button>\n        <button \n            class="btn btn-primary" \n            [disabled]="!categoryForm.valid || disableAddBtn" \n            (click)="addOrUpdateCatagory()">\n            {{ buttonText }}\n        </button>\n    </div>\n</div>\n'},jdgN:function(e,t,a){"use strict";a.r(t),t.default='<div style="margin: 15px 15px">\n    <app-breadcrumb [breadcrumbs]="breadCrumbService.breadcrumbs | async"></app-breadcrumb>\n    <router-outlet></router-outlet>\n</div>'}}]);