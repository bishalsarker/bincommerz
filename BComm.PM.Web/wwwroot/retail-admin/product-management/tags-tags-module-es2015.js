(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"4//j":function(t,e,a){"use strict";a.r(e),e.default='<div style="margin: 15px 15px">\n    <app-breadcrumb [breadcrumbs]="breadCrumbService.breadcrumbs | async"></app-breadcrumb>\n    <router-outlet></router-outlet>\n</div>'},"5WyD":function(t,e,a){"use strict";a.r(e),e.default=""},"7fIC":function(t,e,a){"use strict";a.r(e),e.default='<div style="padding-left: 12px;">\n    <div class="row">\n        <div class="col-md-6 col-sm-12">\n            <div class="form-group">\n                <label for="exampleInputEmail1">Name</label>\n                <input type="text" class="form-control" [formControl]="nameControl" />\n            </div>\n            <div class="form-group">\n                <label for="exampleFormControlTextarea1">Description</label>\n                <textarea \n                    class="form-control" \n                    id="exampleFormControlTextarea1" \n                    rows="3"\n                    [formControl]="descriptionControl">\n                </textarea>\n              </div>\n        </div>\n    </div>\n    <div class="button-row">\n        <button class="btn btn-danger" routerLink="/tags" [disabled]="disableAddBtn">Cancel</button>\n        <button \n            class="btn btn-primary" \n            [disabled]="!tagForm.valid || disableAddBtn" \n            (click)="addOrUpdateTag()">\n            {{ buttonText }}\n        </button>\n    </div>\n</div>'},Gfgi:function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var s=a("mrSG"),r=a("IheW"),i=a("8Y7J"),n=a("iInd"),o=a("EApP"),d=a("2Vo4"),c=a("lJxs"),l=a("LvDl"),u=a("fIz6");let p=class{constructor(t,e,a){this.httpClient=t,this.toastr=e,this.router=a,this.tags=new d.a([]),this.getAllTags().subscribe(),console.log(this.tags.value)}resolveTags(t){return t.map(t=>{const e=Object(l.find)(this.tags.value,e=>e.id===t);return e?e.name:"invalid_tag"})}getAllTags(){return this.httpClient.get(u.a+"tags/get/all",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(c.a)(t=>{t.isSuccess?this.tags.next(t.data):this.showError()}))}getTagById(t){return this.httpClient.get(u.a+"tags/get/"+t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(c.a)(t=>t.isSuccess?t.data:(this.showError(),null)))}addTag(t){return this.httpClient.post(u.a+"tags/addnew",t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(c.a)(e=>{e.isSuccess?(this.getAllTags().subscribe(),this.router.navigate(["tags"]),this.toastr.success("New tag added: "+t.name)):this.showError()}))}updateTag(t){return this.httpClient.put(u.a+"tags/update",t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(c.a)(e=>{e.isSuccess?(this.getAllTags().subscribe(),this.router.navigate(["tags"]),this.toastr.success("Tag updated: "+t.name)):this.showError()}))}deleteTag(t){return this.httpClient.delete(u.a+"tags/delete/"+t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth_token")}}).pipe(Object(c.a)(t=>{t.isSuccess?(this.getAllTags().subscribe(),this.router.navigate(["tags"]),this.toastr.success("Tag deleted")):this.showError()}))}showError(){this.toastr.error("","Error occured")}};p.ctorParameters=()=>[{type:r.a},{type:o.b},{type:n.b}],p=s.a([Object(i.C)({providedIn:"root"})],p)},bYRp:function(t,e,a){"use strict";a.r(e),e.default=""},dwTM:function(t,e,a){"use strict";a.r(e);var s=a("mrSG"),r=a("8Y7J"),i=a("SVse"),n=a("iInd"),o=a("s7LF"),d=a("2Vo4"),c=a("k8Mo"),l=a("Gfgi");let u=class{constructor(t,e,a){this.breadCrumbService=t,this.tagsDataService=e,this.route=a,this.tagId=new d.a(null),this.tagForm=new o.b({name:new o.a("",o.f.required),description:new o.a("")}),this.disableAddBtn=!1,this.buttonText="Save"}get nameControl(){return this.tagForm.get("name")}get descriptionControl(){return this.tagForm.get("description")}ngOnInit(){this.breadCrumbService.addBreadcrumb({title:this.isEditMode?"Edit":"Add",route:""}),this.isEditMode&&this.route.params.subscribe(t=>{const e=t.id;this.tagId.next(e),this.getTagById()}),this.buttonText=this.isEditMode?"Update":"Save"}ngOnDestroy(){this.breadCrumbService.removeLast()}addOrUpdateTag(){this.disableAddBtn=!0,this.buttonText="Saving...";(this.isEditMode?this.updateTag():this.addTag()).subscribe(()=>{},()=>{this.disableAddBtn=!1,this.buttonText="Save"})}getTagById(){this.tagsDataService.getTagById(this.tagId.value).subscribe(t=>{t&&(this.nameControl.setValue(t.name),this.descriptionControl.setValue(t.description))})}get isEditMode(){return this.route.snapshot.data.editMode}addTag(){return this.tagsDataService.addTag({name:this.nameControl.value,description:this.descriptionControl.value})}updateTag(){return this.tagsDataService.updateTag({id:this.tagId.value,name:this.nameControl.value,description:this.descriptionControl.value})}};u.ctorParameters=()=>[{type:c.a},{type:l.a},{type:n.a}],u=s.a([Object(r.n)({selector:"app-tag-form",template:s.b(a("7fIC")).default,styles:[s.b(a("yGCB")).default]})],u);let p=class{constructor(t,e){this.router=t,this.tagsDataService=e,this.columnConfig=new d.a([{columnName:"Name",propertyName:"name"},{columnName:"Description",propertyName:"description",filter:t=>t.description&&""!==t.description.trim()?t.description:"n/a"}]),this.tableActions=new d.a([{icon:"",title:"Edit",showActions:()=>!0,predicate:t=>!0,do:t=>{this.router.navigate(["/tags/edit/"+t.id])}},{icon:"",title:"Delete",showActions:()=>!0,predicate:t=>!0,do:t=>{confirm("Are you sure?")&&this.tagsDataService.deleteTag(t.id).subscribe()}}])}};p.ctorParameters=()=>[{type:n.b},{type:l.a}],p=s.a([Object(r.C)({providedIn:"root"})],p);let h=class{constructor(t,e){this.tagListService=t,this.tagsDataService=e,this.tableData=new d.a([])}ngOnInit(){}};h.ctorParameters=()=>[{type:p},{type:l.a}],h=s.a([Object(r.n)({selector:"app-tags-list",template:s.b(a("lVb1")).default,styles:[s.b(a("5WyD")).default]})],h);let g=class{constructor(t){this.breadCrumbService=t}ngOnInit(){this.breadCrumbService.addBreadcrumb({title:"Tags",route:"/tags"})}ngOnDestroy(){this.breadCrumbService.removeLast()}};g.ctorParameters=()=>[{type:c.a}],g=s.a([Object(r.n)({selector:"app-tags",template:s.b(a("4//j")).default,styles:[s.b(a("bYRp")).default]})],g);const b=[{path:"",component:g,children:[{path:"",component:h},{path:"add",component:u,data:{editMode:!1}},{path:"edit/:id",component:u,data:{editMode:!0}}]}];let m=class{};m=s.a([Object(r.K)({imports:[n.c.forChild(b)],exports:[n.c]})],m);var v=a("PCNd");a.d(e,"TagsModule",(function(){return f}));let f=class{};f=s.a([Object(r.K)({declarations:[g,h,u],imports:[i.b,m,o.e,v.a]})],f)},k8Mo:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var s=a("mrSG"),r=a("8Y7J"),i=a("2Vo4"),n=a("LvDl");let o=class{constructor(){this.breadcrumbs=new i.a([]),this.breadcrumbs.next([])}addBreadcrumb(t){this.hasItem(t)||this.breadcrumbs.value.push(t)}removeLast(){this.breadcrumbs.value.pop()}hasItem(t){return Object(n.find)(this.breadcrumbs.value,e=>e.route===t.route)}};o=s.a([Object(r.C)({providedIn:"root"})],o)},lVb1:function(t,e,a){"use strict";a.r(e),e.default='<div style="padding-left: 12px;">\n    <app-data-table\n        [columnConfig]="tagListService.columnConfig | async" \n        [tableData]="tagsDataService.tags | async"\n        [actions]="tagListService.tableActions | async">\n        <a class="btn btn-link" routerLink="/tags/add"  style="padding-left: 0px;">\n            <i class="fas fa-plus"></i>&nbsp;\n            <span style="font-weight: 600; margin-left: 5px;">Add New</span>\n        </a>\n    </app-data-table>\n</div>'},yGCB:function(t,e,a){"use strict";a.r(e),e.default=""}}]);